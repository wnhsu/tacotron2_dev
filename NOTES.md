## Installation Notes
* change `numpy==1.13.3` to `numpy`. version 1.13.3 is too old for other packages
* change `tensorboardX==1.1` to `tensorboardX` for similar reasons
* change `tensorflow` to `tensorflow-gpu==1.14`. tf.contrib.training.HParams is
  not in tf2.0

## Code Adaptation Notes
* make `get_mask_from_lengths()` return boolean instead of byte mask, because
  `masked_fill_` does not accept byte mask anymore.
* pass `dataformats` to `add_image()` in `Tacotron2Logger.log_validation()`.

## Pretrained Model Notes
* The commit number for `waveglow` is out-dated. Need to manually run `git
  submodule update --remote`
* Need to convert the model with `python waveglow/convert_model.py <old> <new>`

## Run commands

Single-GPU
```
srun --gres=gpu:1 -p sm,2080,titanx \
  python train.py -o <expdir> -l log \
  --hparams=batch_size=40,fp16_run=True
```

Multi-GPU
```
srun --gres=gpu:2 -p sm,2080,titanx \
  python -m multiproc train.py -o <expdir> -l log \
  --hparams=batch_size=40,fp16_run=True,distributed_run=True
```

### Feature TODOs
* GST/GMVAE formulation for the objective
* silence removal
* Initialize code/text embedding

#### Completed
* change filelist to be list of json. Each entry has additional fields
  including speaker-id, duration, text, raw code (uncollapsed).
* random audio/code chunking
* AE/VAE formulation for the objective
* pass speaker ID as input to the model
* infer global voice representations with an audio encoder
* do not concat obs emb if dim set to 0
* add duration info into filelist, used for pre-filtering
* pre-/post-pend sos eos token for chunking

### Experiment TODOs
1. Train on LJSpeech with the original code
2. Add speaker 

### VCTK
[('p238', 12, 18.009864701436136),
 ('p274', 47, 17.97208616780047),
 ('p323', 86, 17.817532879818597),
 ('p271', 44, 17.40572033257748),
 ('p270', 43, 16.773803476946338),
 ('p286', 59, 16.515528344671207),
 ('p276', 49, 16.509509448223714),
 ('p259', 32, 16.473380196523056),
 ('p330', 89, 16.366383219954642),
 ('p335', 92, 16.353537414965995),
 ('p263', 36, 16.285563869992423),
 ('p277', 50, 16.155956916099782),
 ('p243', 16, 16.048724111866974),
 ('p280', 53, 16.03344973544973),
 ('p281', 54, 15.841489795918362),
 ('p265', 38, 15.80694784580499),
 ('p261', 34, 15.731626606198022),
 ('p306', 75, 15.687000755857913), #
 ('p230', 5, 15.386377173091462),
 ('p264', 37, 15.314072562358295),
 ('p307', 76, 15.268830687830699),
 ('p262', 35, 15.078683295540431),
 ('p341', 96, 15.072052154195013), #
 ('p301', 70, 15.008876039304594), #
 ('p329', 88, 15.005857142857144), #
 ('p247', 20, 14.898169312169308),
 ('p268', 41, 14.831267573696145),
 ('p305', 74, 14.798520786092212), #
 ('p300', 69, 14.783563869992438), #
 ('p246', 19, 14.759062736205584),
 ('p248', 21, 14.718100529100525),
 ('p272', 45, 14.651573696145116),
 ('p239', 13, 14.647511715797432),
 ('p314', 82, 14.58501360544217),
 ('p236', 10, 14.41555933484504),
 ('p288', 61, 14.365043083900229),
 ('p347', 99, 14.322799697656844),
 ('p297', 66, 14.237629629629629), #
 ('p283', 56, 14.215288737717291),
 ('p310', 78, 14.175200302343159), #
 ('p317', 84, 14.119021919879064),
 ('p250', 23, 14.048432350718077),
 ('p255', 28, 13.95149206349207),
 ('p284', 57, 13.819547241118675),
 ('p245', 18, 13.754507936507936),
 ('p275', 48, 13.730634920634907),
 ('p374', 106, 13.638507936507937),
 ('p228', 3, 13.564294028722596),
 ('p318', 85, 13.511836734693857), #
 ('p293', 63, 13.441833711262278),
 ('p266', 39, 13.436008314436897),
 ('p258', 31, 13.415423280423285),
 ('p269', 42, 13.39985789871503),
 ('p308', 77, 13.397662131519274), #
 ('p287', 60, 13.308337112622828),
 ('p226', 1, 13.278851095993959),
 ('p233', 8, 13.262423280423294),
 ('p273', 46, 13.24880120937263),
 ('p298', 67, 13.208312169312165),
 ('p244', 17, 13.189427059712779),
 ('p303', 72, 13.182007558578986),
 ('p295', 65, 13.104318972033248),
 ('p254', 27, 13.08956462585035),
 ('p227', 2, 13.079129251700696),
 ('p333', 90, 13.058829176114903),
 ('p240', 14, 13.046808767951623),
 ('p278', 51, 12.956214663643232),
 ('p267', 40, 12.930265306122454),
 ('p282', 55, 12.87435147392291),
 ('p316', 83, 12.842676492819352),
 ('p249', 22, 12.804115646258508),
 ('p299', 68, 12.798788359788354),
 ('p343', 97, 12.714213907785334),
 ('p232', 7, 12.648247921390785),
 ('p285', 58, 12.631922902494322),
 ('p229', 4, 12.602504913076336),
 ('p304', 73, 12.466690854119419),
 ('p253', 26, 12.450435374149661),
 ('p362', 103, 12.419489040060473),
 ('p252', 25, 12.408111111111113),
 ('p326', 87, 12.313567649281936),
 ('p294', 64, 12.295526077097495),
 ('p334', 91, 12.270862433862447),
 ('p312', 80, 12.264074829931966),
 ('p251', 24, 12.26342479213908),
 ('p311', 79, 12.253693877551019),
 ('p292', 62, 12.001566137566142),
 ('p351', 100, 11.997706727135302),
 ('p257', 30, 11.914783068783072),
 ('p256', 29, 11.898529856387006),
 ('p336', 93, 11.886929705215415),
 ('p279', 52, 11.752275132275132),
 ('p241', 15, 11.731975812547242),
 ('p313', 81, 11.632830687830689),
 ('p234', 9, 11.452879062736201),
 ('p231', 6, 11.447908541194247),
 ('p345', 98, 11.396751322751316),
 ('p339', 94, 11.316616024187454),
 ('p260', 33, 11.248700680272107),
 ('p360', 101, 11.166355253212389),
 ('p237', 11, 10.659030234315956),
 ('p363', 104, 10.47166439909296),
 ('p340', 95, 10.386198034769459),
 ('p361', 102, 10.382470143613004),
 ('p376', 107, 9.612428571428577),
 ('p364', 105, 9.375826908541196),
 ('p302', 71, 9.088848072562362),
 ('p225', 0, 8.703132275132276)]
